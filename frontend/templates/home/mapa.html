<!DOCTYPE html>
<html>
<head>
    <title>Mapa Interativo com Leaflet e Sidebar</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center; /* Centraliza o conteúdo horizontalmente */
            align-items: center; /* Centraliza o conteúdo verticalmente */
            height: 100vh; /* Preenche toda a altura da tela */
            flex-direction: column;
        }

        /* Mapa ocupa 100% da largura da tela */
        #map {
            width: 100%;
            height: 100vh;
            transition: width 0.3s ease-in-out;
        }

        /* Estilo para a aba lateral */
        #sidebar {
            position: fixed;
            right: 0;
            top: 0;
            width: 300px;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 30px;  /* Aumentando o padding para mais espaço */
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
            z-index: 1000;
        }

        #sidebar.open {
            transform: translateX(0);
        }

        /* Botão para fechar a aba lateral */
        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            cursor: pointer;
            font-size: 22px; /* Aumentando o tamanho do botão de fechar */
            background-color: transparent;
            border: none;
            color: white;
        }

        /* Aumentando o tamanho da fonte na aba lateral */
        #info {
            font-size: 28px; /* Tamanho da fonte consideravelmente maior */
            line-height: 1.5; /* Espaçamento entre as linhas para facilitar a leitura */
            margin-top: 20px;
            padding: 10px;
        }

        /* Responsividade para telas pequenas (smartphones) */
        @media (max-width: 768px) {
            #map {
                width: 95%;
                height: 60vh;
            }

            #sidebar {
                width: 80%;
            }

            body.sidebar-open #map {
                width: 100%;
                margin-right: 0; /* Não diminui mais o mapa quando a sidebar é aberta */
            }
        }

        @media (max-width: 480px) {
            #sidebar {
                width: 100%;
            }

            body.sidebar-open #map {
                width: 100%;
                margin-right: 0;
            }
        }
    </style>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
  
<div id="map"></div>

<!-- Aba Lateral -->
<div id="sidebar">
    <button class="close-btn" onclick="closeSidebar()">X</button>
    <h2>Informações do Ponto</h2>
    <p id="info">Clique no marcador no mapa para ver as informações.</p>
</div>

<script>
    // Criando o mapa centrado em Belém do Pará
    var map = L.map('map').setView([-1.4550, -48.4900], 13);

    // Adicionando camada de tile (OpenStreetMap)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Dados dos pontos no mapa (coordenadas, informações e ícones)
    var points = [
        { lat: -1.4550, lng: -48.4900, info: "Ponto 1: Localização inicial em Belém do Pará", iconUrl: 'https://cdn.discordapp.com/attachments/524749551526084620/1369501104987045958/image.png?ex=681c16cb&is=681ac54b&hm=cf7943ed8f64d8ffd998a8f6b461cdfd4e3bfa8943f012727a3dfec04dd2f9e5&' },
        { lat: -1.4590, lng: -48.4880, info: "Ponto 2: Outro ponto em Belém", iconUrl: 'https://cdn.discordapp.com/attachments/524749551526084620/1369503412311294012/image.png?ex=681c18f1&is=681ac771&hm=c188886be18133e5fc1c020c8f1be57cad938b7cc64ba7a08deb18d90b27068f&' },
        { lat: -1.4600, lng: -48.4920, info: "Ponto 3: Um terceiro ponto em Belém", iconUrl: 'https://cdn.discordapp.com/attachments/524749551526084620/1369503545778245642/image.png?ex=681c1911&is=681ac791&hm=647fc57f65ce0d3519f6a2c61a90252bfa4c6333b479e7d94f5e143eab9cf20b&' },
    ];

    // Variável para armazenar o estado da aba lateral
    var sidebarOpen = false;

    // Função para abrir a aba lateral com informações
    function openSidebar(info) {
        document.getElementById('info').textContent = info;
        document.getElementById('sidebar').classList.add('open');
        document.body.classList.add('sidebar-open');
        sidebarOpen = true; // Marca a aba lateral como aberta
    }

    // Função para fechar a aba lateral
    function closeSidebar() {
        document.getElementById('sidebar').classList.remove('open');
        document.body.classList.remove('sidebar-open');
        sidebarOpen = false; // Marca a aba lateral como fechada
    }

    // Função para criar ícone personalizado
    function createCustomIcon(iconUrl) {
        return L.icon({
            iconUrl: iconUrl,  // URL do ícone personalizado
            iconSize: [132, 132],  // Tamanho do ícone (em pixels)
            iconAnchor: [16, 32],  // Posição do "pico" do ícone (ponto de ancoragem)
            popupAnchor: [0, -32]  // Posição do popup em relação ao ícone
        });
    }

    // Criando marcadores para cada ponto, com ícones personalizados
    points.forEach(function(point) {
        var marker = L.marker([point.lat, point.lng], { icon: createCustomIcon(point.iconUrl) }).addTo(map);
        marker.on('click', function() {
            if (sidebarOpen) {
                closeSidebar(); // Fecha a aba lateral se já estiver aberta
            } else {
                openSidebar(point.info); // Abre a aba lateral com as informações do ponto
            }
        });
    });

    // Adicionando evento de clique no mapa para garantir que apenas o marcador abra a aba lateral
    map.on('click', function(e) {
        if (sidebarOpen) {
            closeSidebar(); // Fecha a aba lateral se já estiver aberta
        }
    });
</script>

</body>
</html>
